# Playground for webpack deployment scenarios

## "dev build" (non optimized)

* Run `npm run dev`: output will be written to `src/public/dist/`

## "prod bulid" (optimized, using React as external lib from CDN)

* Run `npm run prod`: output will be written `dist/`

To optimize assets for production, this script will:

1. Run webpack with `-p` that leads to minification of the javascript assets
2. Use the configuration in `webpack.config.prod.js`
3. Exclude React from the resulting bundle, so React can be included from a CDN
   (For easier testing in the example, React and ReactDOM are included from local files,
   see `index.html`. In "real life" you might want to use CDN addresses in that file)
4. Generate file names with a unique (hash-based) file name so that a browser can
   cache the files forever (you might want to add apropriate HTTP headers to enforce
   caching). Only `index.html` must not be cached (because it contains the changing
   filenames).
5. To include the files generated by webpack, the `index.html` file is generated
   using the `HtmlWebpackPlugin` based on the template file `index.template.ejs`. In
   your own application you would modify this template to fit your own needs.
   The `HtmlWebpackPlugin` automatically adds the css files to the header of the template
   and the javascript file to the end of the `body`
6. It generates source maps for both css- and javascript files to own files. If you
   don't want source maps in production at all, change `webpack.config.prod.js` or
   hide the `*.map` files behind a proxy/firewall, so that you can use them from
   inside your corporate network but no users from outside will be able to access them.

## Results

```bash
# "dev build"
$ du -h public/dist/
1.6M    public/dist/

# "prod build"
$ du -h dist/
156K    dist/lib  # This includes React and React DOM (in real world delivered by CDN)
188K    dist/     # Our application + CSS + SourceMap
```
